"use strict";function logstashUDP(e,t){var r=dgram.createSocket("udp4");e.logType?e.logType:e.category;return t=t||layouts.dummyLayout,e.fields||(e.fields={}),function(o){if(o.data.length>1){var s=o.data[1];for(var a in s)e.fields[a]=s[a]}e.fields.level=o.level.levelStr;var l={"@version":"1","@timestamp":new Date(o.startTime).toISOString(),type:e.logType?e.logType:e.category,message:t(o),fields:e.fields};sendLog(r,e.host,e.port,l)}}function sendLog(e,t,r,o){var s=new Buffer(JSON.stringify(o));e.send(s,0,s.length,r,t,function(e,o){e&&console.error("log4js.logstashUDP - %s:%p Error: %s",t,r,util.inspect(e))})}function configure(e){var t;return e.layout&&(t=layouts.layout(e.layout.type,e.layout)),logstashUDP(e,t)}var layouts=require("../layouts"),dgram=require("dgram"),util=require("util");exports.appender=logstashUDP,exports.configure=configure;