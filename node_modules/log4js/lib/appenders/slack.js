"use strict";function slackAppender(e,a){return layout=a||layouts.basicLayout,function(a){var n={channel_id:e.channel_id,text:layout(a,e.timezoneOffset),icon_url:e.icon_url,username:e.username};slack.api("chat.postMessage",{channel:n.channel_id,text:n.text,icon_url:n.icon_url,username:n.username},function(e,a){if(e)throw e})}}function configure(e){return e.layout&&(layout=layouts.layout(e.layout.type,e.layout)),slack=new Slack(e.token),slackAppender(e,layout)}var Slack=require("slack-node"),layouts=require("../layouts"),layout,slack,config;exports.name="slack",exports.appender=slackAppender,exports.configure=configure;