"use strict";function isAnyObject(a){return null!==a&&("object"==typeof a||"function"==typeof a)}function numKeys(a){var e=0;for(var r in a)a.hasOwnProperty(r)&&e++;return e}function processTags(a){var e=1===a.length?[a[0]]:Array.apply(null,a);return e.reduce(function(a,e,r,t){return isAnyObject(e)&&Array.isArray(e.tags)&&1==numKeys(e)?a.additionalTags=a.additionalTags.concat(e.tags):a.deTaggedData.push(e),a},{deTaggedData:[],additionalTags:[]})}function logglyAppender(a,e){var r=loggly.createClient(a);return e||(e=passThrough),function(a){var t=processTags(a.data),o=t.deTaggedData,n=t.additionalTags;a.data=o;var s=e(a);r.log({msg:s,level:a.level.levelStr,category:a.categoryName,hostname:os.hostname().toString()},n)}}function configure(a){var e;return a.layout&&(e=layouts.layout(a.layout.type,a.layout)),logglyAppender(a,e)}var layouts=require("../layouts"),loggly=require("loggly"),os=require("os"),passThrough=layouts.messagePassThroughLayout;exports.name="loggly",exports.appender=logglyAppender,exports.configure=configure;