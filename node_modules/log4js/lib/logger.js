"use strict";function LoggingEvent(e,t,o,l){this.startTime=new Date,this.categoryName=e,this.data=o,this.level=t,this.logger=l}function Logger(e,t){this.category=e||DEFAULT_CATEGORY,t&&this.setLevel(t)}function addLevelMethods(e){e=levels.toLevel(e);var t=e.toString().toLowerCase(),o=t.replace(/_([a-z])/g,function(e){return e[1].toUpperCase()}),l=o[0].toUpperCase()+o.slice(1);Logger.prototype["is"+l+"Enabled"]=function(){return this.isLevelEnabled(e.toString())},Logger.prototype[o]=function(){if(logWritesEnabled&&this.isLevelEnabled(e)){for(var t=arguments.length,o=new Array(t),l=0;t>l;l++)o[l]=arguments[l];this._log(e,o)}}}function disableAllLogWrites(){logWritesEnabled=!1}function enableAllLogWrites(){logWritesEnabled=!0}var levels=require("./levels"),util=require("util"),events=require("events"),DEFAULT_CATEGORY="[default]",logWritesEnabled=!0;util.inherits(Logger,events.EventEmitter),Logger.DEFAULT_CATEGORY=DEFAULT_CATEGORY,Logger.prototype.level=levels.TRACE,Logger.prototype.setLevel=function(e){this.level=levels.toLevel(e,this.level||levels.TRACE)},Logger.prototype.removeLevel=function(){delete this.level},Logger.prototype.log=function(){var e=levels.toLevel(arguments[0],levels.INFO);if(this.isLevelEnabled(e)){for(var t=arguments.length-1,o=new Array(t),l=0;t>l;l++)o[l]=arguments[l+1];this._log(e,o)}},Logger.prototype.isLevelEnabled=function(e){return this.level.isLessThanOrEqualTo(e)},["Trace","Debug","Info","Warn","Error","Fatal","Mark"].forEach(function(e){addLevelMethods(e)}),Logger.prototype._log=function(e,t){var o=new LoggingEvent(this.category,e,t,this);this.emit("log",o)},exports.LoggingEvent=LoggingEvent,exports.Logger=Logger,exports.disableAllLogWrites=disableAllLogWrites,exports.enableAllLogWrites=enableAllLogWrites,exports.addLevelMethods=addLevelMethods;