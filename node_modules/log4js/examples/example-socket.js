var log4js=require("./lib/log4js"),cluster=require("cluster"),numCPUs=require("os").cpus().length,i=0;if(cluster.isMaster){for(log4js.configure({appenders:[{type:"multiprocess",mode:"master",appender:{type:"console"}}]}),console.info("Master creating %d workers",numCPUs),i=0;numCPUs>i;i++)cluster.fork();cluster.on("death",function(e){console.info("Worker %d died.",e.pid)})}else{log4js.configure({appenders:[{type:"multiprocess",mode:"worker"}]});var logger=log4js.getLogger("example-socket");for(console.info("Worker %d started.",process.pid),i=0;1e3>i;i++)logger.info("Worker %d - logging something %d",process.pid,i)}